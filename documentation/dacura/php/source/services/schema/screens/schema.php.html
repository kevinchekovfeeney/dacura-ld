<html>
    <head>
        <script
            type="text/javascript"
            src="../../../../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../../../../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../../../../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../../../../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;script src='&lt;?=$service-&gt;furl(&quot;js&quot;, &quot;jquery.dataTables.js&quot;)?&gt;'&gt;&lt;/script&gt;
&lt;script src='&lt;?=$service-&gt;furl(&quot;js&quot;, &quot;dataTables.jqueryui.js&quot;)?&gt;'&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; href=&quot;&lt;?=$service-&gt;furl(&quot;css&quot;, &quot;dataTables.jqueryui.css&quot;)?&gt;&quot; /&gt;

&lt;div id='tab-holder'&gt;
	 &lt;ul id=&quot;schema-pane-list&quot; class=&quot;dch&quot;&gt;
	 	&lt;li&gt;&lt;a href=&quot;#graphs-list&quot;&gt;Graphs&lt;/a&gt;&lt;/li&gt;
	 	&lt;li&gt;&lt;a href=&quot;#create-graph&quot;&gt;Create Graph&lt;/a&gt;&lt;/li&gt;
	 &lt;/ul&gt;
	&lt;div id=&quot;graphs-list&quot;&gt;
		&lt;div class=&quot;tab-top-message-holder&quot;&gt;
			&lt;div class=&quot;tool-tab-info&quot; id=&quot;graphs-msgs&quot;&gt;&lt;/div&gt;
		&lt;/div&gt;
		&lt;div id='graphs-table-holder' class='dch'&gt;&lt;/div&gt;
	&lt;/div&gt;
	&lt;div id=&quot;create-graph&quot;&gt;
		&lt;div class=&quot;tab-top-message-holder&quot;&gt;
			&lt;div class=&quot;tool-tab-info&quot; id=&quot;create-msgs&quot;&gt;
				&lt;?php echo $service-&gt;showLDResultbox($params);?&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;div id='create-holder' class='dch'&gt;
			&lt;table class='dc-wizard'&gt;
				&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
				&lt;tr&gt;&lt;th&gt;Graph Name&lt;/th&gt;&lt;td&gt;&lt;input type='text' id='graphname'&gt;&lt;/td&gt;&lt;/tr&gt;
			&lt;/table&gt;
			&lt;div class=&quot;tool-buttons&quot;&gt;
	   			&lt;button class=&quot;dacura-button create-graph-button&quot; id=&quot;create-button&quot;&gt;Create Graph&lt;/button&gt;
	      	&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&quot;tabletemplates&quot; style=&quot;display:none&quot;&gt;
	&lt;div id=&quot;graphs-template&quot;&gt;
		&lt;table class=&quot;graphs_table display&quot;&gt;
			&lt;thead&gt;
			&lt;tr&gt;
				&lt;th&gt;ID&lt;/th&gt;
				&lt;th&gt;Version&lt;/th&gt;
				&lt;th&gt;Status&lt;/th&gt;
				&lt;th&gt;History&lt;/th&gt;
			&lt;/tr&gt;
			&lt;/thead&gt;
			&lt;tbody&gt;&lt;/tbody&gt;
		&lt;/table&gt;
	&lt;/div&gt;
&lt;/div&gt;
&lt;script&gt;

function drawGraphs(graphs){
	var k = $('#graphs-template').html();
	$('#graphs-table-holder').html(k);
	var ids = [];
	for (var key in graphs) {
	  if (graphs.hasOwnProperty(key)) {
		  $('#graphs-table-holder .graphs_table tbody').append(
			  &quot;&lt;tr class='graph-list' id='graph_&quot; + ids.length + &quot;'&gt;&quot; + 
			  	&quot;&lt;td&gt;&quot; + graphs[key].id + &quot;&lt;/td&gt;&quot; + 
				&quot;&lt;td&gt;&quot; + graphs[key].version + &quot;&lt;/td&gt;&quot; + 
				&quot;&lt;td&gt;&quot; + graphs[key].status + &quot;&lt;/td&gt;&quot; + 
				&quot;&lt;td&gt;&quot; + timeConverter(graphs[key].createtime) + &quot;&lt;/td&gt;&lt;/tr&gt;&quot; 
		   );
			$('#graph_' + ids.length).click( function (event){
				//alert(ids[this.id.substr(6)]);
				window.location.href = dacura.system.pageURL() + &quot;/&quot; + ids[this.id.substr(6)];
		  		//dacura.schema.fetchGraph(ids[this.id.substr(6)], drawGraph);
		    });
		  	ids[ids.length] = graphs[key].id;		  	 		  	
		}
	}
	$('.graph-list').hover(function(){
		$(this).addClass('userhover');
	}, function() {
	    $(this).removeClass('userhover');
	});
	$('#graphs-table-holder').show();
	$('#graphs-table-holder .graphs_table').dataTable({&quot;jQueryUI&quot;: true, &quot;searching&quot;: false, &quot;info&quot;: false});
	if(ids.length == 0){
		dacura.system.showErrorResult(&quot;&quot;, false, &quot;No Graphs Found in system&quot;, '#graphs-table-holder .dataTables_empty');		
	}
}

function showCreateResult(obj){
	if(typeof(dacura.ldresult) != &quot;undefined&quot;){
		dacura.ldresult.update_type = &quot;create&quot;;
		var cancel = function(){
			$('#create-msgs').html(&quot;&quot;);
		};
		dacura.ldresult.showDecision(json, '#create-msgs', cancel);			
	}
	else {
		dacura.system.showJSONErrorResult(json, '#create-msgs'); 	
	}
}

function initDecorations(){
	//view format choices
	$('#create-button').button().click(function (event){
		dacura.schema.createGraph($('#graphname').val(), {scrollto: '#create-msgs', resultbox: '#create-msgs', errorbox: '#create-msgs', busybox: '#create-graph'}, showCreateResult);
	});
}

function clearResultMessage(){
	dacura.system.clearResultMessage();	
}

function showUpdateNSButton(){
	$('#save-namespaces').show();
}

$(function() {
	initDecorations();
	dacura.system.init({&quot;mode&quot;: &quot;tool&quot;, &quot;tabbed&quot;: true});
	$('#schema-pane-list').show();
	$(&quot;#tab-holder&quot;).tabs( {
        &quot;activate&quot;: function(event, ui) {
            $( $.fn.dataTable.tables( true ) ).DataTable().columns.adjust();
        }
    });
	$('#create-holder').show();
	dacura.schema.entity_type = &quot;graph&quot;;
	dacura.schema.fetchentitylist(drawGraphs, {resultbox: '#graphs-msgs', errorbox: '#graphs-msgs', busybox: '#graphs-lists'});
});
&lt;/script&gt;</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all();
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>