<html>
    <head>
        <script
            type="text/javascript"
            src="../../../../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../../../../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../../../../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../../../../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php 
/*
 * % Required best practice
preTestSchema(classCycleSC).
preTestSchema(propertyCycleSC).
% best practice
testSchema(noImmediateDomainSC).
testSchema(noImmediateRangeSC).
testSchema(notUniqueClassLabelSC).
testSchema(notUniqueClassSC).
testSchema(notUniquePropertySC).
testSchema(schemaBlankNodeSC).
% OWL DL
testSchema(orphanClassSC).
testSchema(orphanPropertySC). 
testSchema(invalidRangeSC). 
testSchema(invalidDomainSC).
testSchema(domainNotSubsumedSC).
testSchema(rangeNotSubsumedSC).

%%%% Instance Tests
%%%% Local testing for violation of specific known elements in update.
%%%% must be pred/6 and have argument list (X,P,Y,Instance,Schema,Reason)
%% best Practice
edgeConstraints(noPropertyDomainIC).
edgeConstraints(noPropertyRangeIC).
edgeConstraints(instanceBlankNodeIC).
%% OWL DL (Constraint)
edgeConstraints(invalidEdgeIC).
edgeConstraints(edgeOrphanInstanceIC).
edgeConstraints(notFunctionalPropertyIC).
edgeConstraints(notInverseFunctionalPropertyIC).
edgeConstraints(localOrphanPropertyIC).


 */


$dqs = array();
$dqs[&quot;classCycleSC&quot;] = array(
	&quot;name&quot; =&gt; &quot;Class Cycle&quot;,
	&quot;default&quot; =&gt; &quot;on&quot;,
	&quot;type&quot; =&gt; &quot;foundation&quot;,
	&quot;graph&quot; =&gt; &quot;schema&quot;,
	&quot;text&quot; =&gt; &quot;The schema has cycles in the class hierarchy&quot;
);
$dqs[&quot;propertyCycleSC&quot;] = array(
	&quot;default&quot; =&gt; &quot;on&quot;,
	&quot;name&quot; =&gt; &quot;Property Cycle&quot;,
	&quot;type&quot; =&gt; &quot;foundation&quot;,
	&quot;graph&quot; =&gt; &quot;schema&quot;,
	&quot;text&quot; =&gt; &quot;The schema has cycles in the property hierarchy&quot;
);

$dqs[&quot;noImmediateDomainSC&quot;] = array(
	&quot;name&quot; =&gt; &quot;No Immediate Domain&quot;,
	&quot;type&quot; =&gt; &quot;bp&quot;,
	&quot;graph&quot; =&gt; &quot;schema&quot;,
	&quot;text&quot; =&gt; &quot;There is no domain specified directly for the class&quot;
);

$dqs[&quot;noImmediateRangeSC&quot;] = array(
	&quot;name&quot; =&gt; &quot;No Immediate Range&quot;,
	&quot;type&quot; =&gt; &quot;bp&quot;,
	&quot;graph&quot; =&gt; &quot;schema&quot;,
	&quot;text&quot; =&gt; &quot;There is no range specified directly for the class&quot;
);

$dqs[&quot;notUniqueClassLabelSC&quot;] = array(
	&quot;name&quot; =&gt; &quot;Not Unique Class Label&quot;,
	&quot;type&quot; =&gt; &quot;bp&quot;,
	&quot;graph&quot; =&gt; &quot;schema&quot;,
	&quot;text&quot; =&gt; &quot;The class label is not unique&quot;
);

$dqs[&quot;notUniqueClassSC&quot;] = array(
	&quot;name&quot; =&gt; &quot;Not Unique Class&quot;,
	&quot;type&quot; =&gt; &quot;bp&quot;,
	&quot;graph&quot; =&gt; &quot;schema&quot;,
	&quot;text&quot; =&gt; &quot;The class is not unique&quot;
);

$dqs[&quot;notUniquePropertySC&quot;] = array(
	&quot;name&quot; =&gt; &quot;Not Unique Property&quot;,
	&quot;type&quot; =&gt; &quot;bp&quot;,
	&quot;graph&quot; =&gt; &quot;schema&quot;,
	&quot;text&quot; =&gt; &quot;The property is not unique&quot;
);

$dqs[&quot;schemaBlankNodeSC&quot;] = array(
	&quot;default&quot; =&gt; &quot;on&quot;,
	&quot;name&quot; =&gt; &quot;Schema Blank Node&quot;,
	&quot;type&quot; =&gt; &quot;bp&quot;,
	&quot;graph&quot; =&gt; &quot;schema&quot;,
	&quot;text&quot; =&gt; &quot;The schema contains blank nodes&quot;
);

$dqs[&quot;orphanClassSC&quot;] = array(
		&quot;default&quot; =&gt; &quot;on&quot;,
		&quot;name&quot; =&gt; &quot;Orphan Class&quot;,
		&quot;type&quot; =&gt; &quot;owldl&quot;,
		&quot;graph&quot; =&gt; &quot;schema&quot;,
		&quot;text&quot; =&gt; &quot;The parent class does not exist in the schema&quot;
);

$dqs[&quot;orphanPropertySC&quot;] = array(
		&quot;default&quot; =&gt; &quot;on&quot;,
		&quot;name&quot; =&gt; &quot;Orphan Property&quot;,
		&quot;type&quot; =&gt; &quot;owldl&quot;,
		&quot;graph&quot; =&gt; &quot;schema&quot;,
		&quot;text&quot; =&gt; &quot;The parent property does not exist in the schema&quot;
);

$dqs[&quot;invalidRangeSC&quot;] = array(
		&quot;default&quot; =&gt; &quot;on&quot;,
		&quot;name&quot; =&gt; &quot;Invalid Range&quot;,
		&quot;type&quot; =&gt; &quot;owldl&quot;,
		&quot;graph&quot; =&gt; &quot;schema&quot;,
		&quot;text&quot; =&gt; &quot;The range is invalid&quot;
);

$dqs[&quot;invalidDomainSC&quot;] = array(
		&quot;default&quot; =&gt; &quot;on&quot;,
		&quot;name&quot; =&gt; &quot;Invalid Domain&quot;,
		&quot;type&quot; =&gt; &quot;owldl&quot;,
		&quot;graph&quot; =&gt; &quot;schema&quot;,
		&quot;text&quot; =&gt; &quot;The domain is invalid&quot;
);

$dqs[&quot;domainNotSubsumedSC&quot;] = array(
		&quot;default&quot; =&gt; &quot;on&quot;,
		&quot;name&quot; =&gt; &quot;Domain Not Subsumed&quot;,
		&quot;type&quot; =&gt; &quot;owldl&quot;,
		&quot;graph&quot; =&gt; &quot;schema&quot;,
		&quot;text&quot; =&gt; &quot;The domain is not subsumed&quot;
);

$dqs[&quot;rangeNotSubsumedSC&quot;] = array(
		&quot;default&quot; =&gt; &quot;on&quot;,
		&quot;name&quot; =&gt; &quot;Range Not Subsumed&quot;,
		&quot;type&quot; =&gt; &quot;owldl&quot;,
		&quot;graph&quot; =&gt; &quot;schema&quot;,
		&quot;text&quot; =&gt; &quot;The range is not subsumed&quot;
);

$dqs[&quot;noPropertyDomainIC&quot;] = array(
		&quot;default&quot; =&gt; &quot;on&quot;,
		&quot;name&quot; =&gt; &quot;No Property Domain&quot;,
		&quot;type&quot; =&gt; &quot;bp&quot;,
		&quot;graph&quot; =&gt; &quot;instance&quot;,
		&quot;text&quot; =&gt; &quot;The domain of the property is not defined&quot;
);

$dqs[&quot;noPropertyRangeIC&quot;] = array(
		&quot;default&quot; =&gt; &quot;on&quot;,
		&quot;name&quot; =&gt; &quot;No Property Range&quot;,
		&quot;type&quot; =&gt; &quot;bp&quot;,
		&quot;graph&quot; =&gt; &quot;instance&quot;,
		&quot;text&quot; =&gt; &quot;The range of the property is not defined&quot;
);

$dqs[&quot;instanceBlankNodeIC&quot;] = array(
		&quot;default&quot; =&gt; &quot;on&quot;,
		&quot;name&quot; =&gt; &quot;Instance Blank Node&quot;,
		&quot;type&quot; =&gt; &quot;bp&quot;,
		&quot;graph&quot; =&gt; &quot;instance&quot;,
		&quot;text&quot; =&gt; &quot;Blank nodes are present in the instance data&quot;
);

$dqs[&quot;invalidEdgeIC&quot;] = array(
		&quot;default&quot; =&gt; &quot;on&quot;,
		&quot;name&quot; =&gt; &quot;Invalid Edge&quot;,
		&quot;type&quot; =&gt; &quot;owldl&quot;,
		&quot;graph&quot; =&gt; &quot;instance&quot;,
		&quot;text&quot; =&gt; &quot;Invalid edge in instance data&quot;
);

$dqs[&quot;edgeOrphanInstanceIC&quot;] = array(
		&quot;default&quot; =&gt; &quot;on&quot;,
		&quot;name&quot; =&gt; &quot;Edge Orphan Instance&quot;,
		&quot;type&quot; =&gt; &quot;owldl&quot;,
		&quot;graph&quot; =&gt; &quot;instance&quot;,
		&quot;text&quot; =&gt; &quot;Orphan edge in instance data&quot;
);

$dqs[&quot;notFunctionalPropertyIC&quot;] = array(
		&quot;default&quot; =&gt; &quot;on&quot;,
		&quot;name&quot; =&gt; &quot;Not Functional Property&quot;,
		&quot;type&quot; =&gt; &quot;owldl&quot;,
		&quot;graph&quot; =&gt; &quot;instance&quot;,
		&quot;text&quot; =&gt; &quot;Not a functional property in instance data&quot;
);

$dqs[&quot;notInverseFunctionalPropertyIC&quot;] = array(
		&quot;default&quot; =&gt; &quot;on&quot;,
		&quot;name&quot; =&gt; &quot;Not Inverse Functional Property&quot;,
		&quot;type&quot; =&gt; &quot;owldl&quot;,
		&quot;graph&quot; =&gt; &quot;instance&quot;,
		&quot;text&quot; =&gt; &quot;Not inverse property in instance data&quot;
);

$dqs[&quot;localOrphanPropertyIC&quot;] = array(
		&quot;default&quot; =&gt; &quot;on&quot;,
		&quot;name&quot; =&gt; &quot;Local Orphan Property&quot;,
		&quot;type&quot; =&gt; &quot;owldl&quot;,
		&quot;graph&quot; =&gt; &quot;instance&quot;,
		&quot;text&quot; =&gt; &quot;Not inverse property in instance data&quot;
);


function getDQSOptions($dqs, $graph){
	$options = array();
	foreach($dqs as $id =&gt; $props){
		//if(in_array($graph, $props['graph'])){
		if($graph == $props['graph']){
			$options[$id] = $props;
		}
	}
	return $options;
}

function constraintTypeText($graph, $ct){
	if($graph == &quot;schema&quot;){
		if($ct == &quot;foundation&quot;){
			$ct = &quot;Foundational Constraints&quot;;
		}
		elseif($ct == &quot;owldl&quot;){
			$ct = &quot;Structural Rules&quot;;
		}
		elseif($ct == &quot;bp&quot;){
			$ct = &quot;Schema best practice rules&quot;;
		}
	}
	else {
		if($ct == &quot;owldl&quot;){
			$ct = &quot;Structural Rules&quot;;
		}
		elseif($ct == &quot;bp&quot;){
			$ct = &quot;Instance data best practice rules&quot;;
		}
	}
	return $ct;
}

function getDQSCheckboxes($dqs, $graph){
	$boxes = array();
	$options = getDQSOptions($dqs, $graph);
	foreach($options as $id =&gt; $props){
		$checked = (isset($props['default']) &amp;&amp; $props['default'] == &quot;on&quot;) ? &quot; checked&quot; : &quot;&quot;;
		$html = &quot;&lt;span class='dqs-input-field'&gt;&lt;input type='checkbox' class='dqsoption dqsoption-$graph' id='$id' value='$id' title='&quot; . $props['text'] . &quot;' $checked&gt;&lt;label for='$id'&gt;&quot;.$props['name'].&quot;&lt;/label&gt;&lt;/span&gt;&quot;;
		$boxes[$props['type']][] = $html;
	}
	$html = &quot;&quot;;
	foreach($boxes as $id =&gt; $entries){
		$ct = constraintTypeText($graph, $id);
		$html .= &quot;&lt;div class='dqs-type dqs-$id'&gt;&lt;div class='dqs-category-title'&gt;&quot;.$ct.&quot;&lt;/div&gt;&quot;.implode(&quot; &quot;, $entries).&quot;&lt;/div&gt;&quot;;
	}
	return $html;
}
?&gt;
&lt;?php if ($params['graph'] == &quot;both&quot;){?&gt;
&lt;table class='dqs-config'&gt;
	&lt;tr&gt;
		&lt;th&gt;Schema Graph &lt;span class='dqs-schema-all'&gt;&lt;input type='checkbox' id='dqs-schema-all'&gt;&lt;label for='dqs-schema-all'&gt;Select All&lt;/label&gt;&lt;/span&gt;
		&lt;/th&gt;
		&lt;td&gt;&lt;?= getDQSCheckboxes($dqs, &quot;schema&quot;);  ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;th&gt;Instance Graph &lt;span class='dqs-instance-all'&gt;&lt;input type='checkbox' id='dqs-instance-all'&gt;&lt;label for='dqs-instance-all'&gt;Select All&lt;/label&gt;&lt;/span&gt;&lt;/th&gt;
		&lt;td&gt;&lt;?= getDQSCheckboxes($dqs, &quot;instance&quot;);  ?&gt;&lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;?php } else {?&gt;
&lt;div class='dqsopts'&gt;
	&lt;div class='dqs-opts-title'&gt;Choose which constraints to apply&lt;/div&gt;
	&lt;span class='dqs-all'&gt;&lt;input type='checkbox' id='dqs-all'&gt; &lt;label for='dqs-all'&gt;Select All&lt;/label&gt;&lt;/span&gt;
	&lt;?php echo getDQSCheckboxes($dqs, $params['graph']);?&gt;
&lt;/div&gt;
&lt;?php } ?&gt;


&lt;script&gt;
dacura.dqs = {}
dacura.dqs.getSelection = function(graph){
	var tests = [];
	$('input:checkbox.dqsoption-' + graph).each(function () {
		if(this.checked){
			tests.push($(this).val());
		}
    });
	return tests;
};

$('.dqsoption').button();
$( &quot;#dqs-all&quot; ).button().click(function(event){
	if($('#dqs-all').is(&quot;:checked&quot;)){
		$(&quot;#dqs-instance-all&quot;).prop('checked', true).button(&quot;refresh&quot;);
		$(&quot;#dqs-schema-all&quot;).prop('checked', true).button(&quot;refresh&quot;);
		$(&quot;input:checkbox.dqsoption&quot;).prop('checked', true).button(&quot;refresh&quot;);
	}
	else {
		$(&quot;#dqs-instance-all&quot;).prop('checked', false).button(&quot;refresh&quot;);
		$(&quot;#dqs-schema-all&quot;).prop('checked', false).button(&quot;refresh&quot;);
		$(&quot;input:checkbox.dqsoption&quot;).prop('checked', false).button(&quot;refresh&quot;);
	}					
});
$( &quot;#dqs-instance-all&quot; ).button().click(function(event){
	if($('#dqs-instance-all').is(&quot;:checked&quot;)){
		$(&quot;input:checkbox.dqsoption-instance&quot;).prop('checked', true).button(&quot;refresh&quot;);
	}
	else {
		$(&quot;input:checkbox.dqsoption-instance&quot;).prop('checked', false).button(&quot;refresh&quot;);
	}					
});
$( &quot;#dqs-schema-all&quot; ).button().click(function(event){
	if($('#dqs-schema-all').is(&quot;:checked&quot;)){
		$(&quot;input:checkbox.dqsoption-schema&quot;).prop('checked', true).button(&quot;refresh&quot;);
	}
	else {
		$(&quot;input:checkbox.dqsoption-schema&quot;).prop('checked', false).button(&quot;refresh&quot;);
	}					
});


&lt;/script&gt;

</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all();
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>