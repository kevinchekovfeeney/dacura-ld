<html>
    <head>
        <script
            type="text/javascript"
            src="../../../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../../../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../../../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../../../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php

include_once(&quot;LdDacuraServer.php&quot;);

class LdService extends DacuraService {
	
	var $public_screens = array(&quot;test&quot;);
	var $default_screen = &quot;list&quot;;
	var $protected_screens = array(&quot;list&quot; =&gt; array(&quot;admin&quot;), &quot;view&quot; =&gt; array(&quot;admin&quot;));
	
	function init(){
		$this-&gt;included_css[] = $this-&gt;get_service_file_url('style.css', &quot;ld&quot;);
	}
		
	function getUpdateStatusOptions(){
		return $this-&gt;getEntityStatusOptions();
	}
	
	function getEntityStatusOptions(){
		$opts = DacuraObject::$valid_statuses;
		$html = &quot;&quot;;
		foreach($opts as $v =&gt; $l){
			$html .= &quot;&lt;option value='$v'&gt;$l&lt;/option&gt;&quot;;
		}
		return $html;			
	}

	function getCreateStatusOptions(){
		$opts = LDEntity::$entity_types;
		$html = &quot;&quot;;
		foreach($opts as $v =&gt; $l){
			$html .= &quot;&lt;option value='$v'&gt;$l&lt;/option&gt;&quot;;
		}
		return $html;
	}
	
	/*
	 * The various optional arguments supported by the linked data api
	 */
	function getOptionalArgs(){
		$args = array();
		if(isset($_GET['version'])) $args['version'] = $_GET['version'];
		if(isset($_GET['mode'])){
			$args['mode'] = $_GET['mode'];
		}
		else {
			$args['mode'] = &quot;view&quot;;
		}
		if(isset($_GET['format'])){
			$args['format'] = $_GET['format'];
		}
		else {
			$args['format'] = &quot;json&quot;;
		}
		if(isset($_GET['display'])) {
			$args['display'] = $_GET['display'];
		}
		else {
			$args['display'] = &quot;ns_links_typed_problems&quot;;
		}
		$args['options'] = array(&quot;history&quot;);
		return $args;		
	}
	
	function getScreenForCall(){
		if($this-&gt;screen == &quot;list&quot;){
			return &quot;list&quot;;
		}
		return &quot;view&quot;;
	}
	
	function getParamsForScreen($screen, &amp;$dacura_server){
		$params = array(&quot;image&quot; =&gt; $this-&gt;furl(&quot;image&quot;, &quot;services/ld.png&quot;));
		$params['dt'] = true;
		if($screen == &quot;list&quot;){
			$params[&quot;breadcrumbs&quot;] = array(array(), array());
			if($this-&gt;getCollectionID() != &quot;all&quot;){
				$this-&gt;dacura_tables['ld']['datatable_options']['aoColumns'][2] = array(&quot;bVisible&quot; =&gt; false);
				$this-&gt;dacura_tables['updates']['datatable_options']['aoColumns'][3] = array(&quot;bVisible&quot; =&gt; false);
			}
			$params['entity_datatable'] = $this-&gt;getDatatableSetting(&quot;ld&quot;);
			$params['update_datatable'] = $this-&gt;getDatatableSetting(&quot;updates&quot;);				
			$params[&quot;title&quot;] = &quot;Linked Data Entities&quot;;
			$params[&quot;subtitle&quot;] = &quot;A list of the linked data entities managed in the system&quot;;
			if($this-&gt;collection_id == &quot;all&quot;){
				$params['show_collection'] = true;
			}
			$params['status_options'] = $this-&gt;getCreateStatusOptions();
		}
		else {
			if($this-&gt;args &amp;&amp; $this-&gt;screen == 'update'){
				$id = &quot;update/&quot;.implode(&quot;/&quot;, $this-&gt;args);
			}
			elseif($this-&gt;args){
				$id = $this-&gt;screen.&quot;/&quot;.implode(&quot;/&quot;, $this-&gt;args);
			}
			else {
				$id = $this-&gt;screen;
			}
			$params = array(&quot;id&quot; =&gt; $id,
					&quot;title&quot; =&gt; &quot;Entity Data&quot;,
					&quot;subtitle&quot; =&gt; &quot;Entity View&quot;,
					&quot;breadcrumbs&quot; =&gt; array(array(), array()),
					&quot;description&quot; =&gt; &quot;Navigate, view and update your managed entities&quot;
			);
			if($this-&gt;screen == 'update'){
				$params['status_options'] = $this-&gt;getUpdateStatusOptions();
			}
			else {
				$params['status_options'] = $this-&gt;getEntityStatusOptions();
			}
			//$this-&gt;renderToolHeader($params);
			if(isset($_GET['mode'])) $params['mode'] = $_GET['mode'];
			if(isset($_GET['version'])) $params['version'] = $_GET['version'];
			if(isset($_GET['format'])) $params['format'] = $_GET['format'];
			if(isset($_GET['display'])) $params['display'] = $_GET['display'];
		}
		return $params;
	}
	
	
	function loadArgsFromBrowserURL($sections){
		if(count($sections) &gt; 0){
			$this-&gt;screen = array_shift($sections);
			$this-&gt;args = $sections;
		}
		else {
			$this-&gt;screen = $this-&gt;default_screen;
		}
	}
	
}
</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all();
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>