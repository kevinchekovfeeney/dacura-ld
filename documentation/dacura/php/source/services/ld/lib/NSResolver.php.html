<html>
    <head>
        <script
            type="text/javascript"
            src="../../../../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../../../../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../../../../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../../../../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php
class NSResolver extends DacuraObject {
	var $prefixes = array();//prefix =&gt; full
	/*
	 *
	*/
	var $default_prefixes = array(
		&quot;rdf&quot; =&gt; &quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;,
		&quot;rdfs&quot; =&gt; &quot;http://www.w3.org/2000/01/rdf-schema#&quot;,
		&quot;xsd&quot; =&gt; &quot;http://www.w3.org/2001/XMLSchema#&quot;,
		&quot;owl&quot; =&gt; &quot;http://www.w3.org/2002/07/owl#&quot;
	);
	
	var $structural_predicates = array(
		&quot;rdf&quot; =&gt; array(&quot;type&quot;),
		&quot;rdfs&quot; =&gt; array(&quot;range&quot;, &quot;domain&quot;, &quot;subPropertyOf&quot;, &quot;subClassOf&quot;, &quot;member&quot;),
		&quot;owl&quot; =&gt; array(&quot;inverseOf&quot;, &quot;unionOf&quot;, &quot;complementOf&quot;, 
					&quot;intersectionOf&quot;, &quot;oneOf&quot;, &quot;dataRange&quot;, &quot;disjointWith&quot;, &quot;imports&quot;, &quot;sameAs&quot;, &quot;differentFrom&quot;,
				&quot;allValuesFrom&quot;, &quot;someValuesFrom&quot;)  
			
	);
	
	var $url_mappings = array(
		&quot;http://www.lehigh.edu/~zhp2/2004/0401/univ-bench.owl#&quot; =&gt; &quot;http://swat.cse.lehigh.edu/onto/univ-bench.owl#&quot;,
		&quot;http://www.w3.org/2008/05/skos#&quot; =&gt; &quot;http://www.w3.org/2004/02/skos/core#&quot;,
		&quot;http://web.resource.org/cc/&quot; =&gt; &quot;http://creativecommons.org/ns#&quot;	
	);
	
	function mapURL($url){
		foreach($this-&gt;url_mappings as $uk =&gt; $uv){
			if(substr($url, 0, strlen($uk)) == $uk){
				return $uv.substr($url, strlen($uk));
			}
		}
		return $url;
	}
	
	function isStructuralNamespace($ns){
		if(in_array($ns, array_keys($this-&gt;default_prefixes))) return true;
		if($ns == &quot;_&quot;) return true;
		if($ns == &quot;unknown&quot;) return true;
		return false;
	}

	function __construct($dacura_url = false, $local_url = false, $set_defaults = true){
		if($set_defaults){
			$this-&gt;prefixes = $this-&gt;default_prefixes;
		}
		if($dacura_url){
			$this-&gt;prefixes[&quot;dacura&quot;] = $dacura_url;
		}
		if($local_url){
			$this-&gt;prefixes['local'] = $local_url;
		}
	}
	
	function isStructuralPredicate($url){
		foreach($this-&gt;structural_predicates as $sh =&gt; $preds){
			foreach($preds as $pred){
				if($this-&gt;match($url, $sh, $pred)){
					return true;
				}
			}
		}
		return false;
	}
	
	function setPrefixMap($pmap){
		$this-&gt;prefixes = $pmap;
	}

	function load($p){
		$this-&gt;prefixes = $p;
		return true;
	}

	function getURL($shorthand){
		return isset($this-&gt;prefixes[$shorthand]) ? $this-&gt;prefixes[$shorthand] : false;
	}

	function getShorthand($url){
		foreach($this-&gt;prefixes as $shorthand =&gt; $id){
			if($url == $id){
				return $shorthand;
			}
		}
		return false;
	}

	function match($value, $prefix, $id){
		if($value == $prefix.&quot;:&quot;.$id) return true;
		if($value == $this-&gt;getURL($prefix).$id) return true;
		return false;
	}

	function compress($url){
		foreach($this-&gt;prefixes as $shorthand =&gt; $id){
			if(substr($url, 0, strlen($id)) == $id){
				$urlid = substr($url, strlen($id));
				return $shorthand.&quot;:&quot;.$urlid;
			}
		}
		return false;
	}

	function expand($prefixed_url){
		if(isNamespacedURL($prefixed_url) &amp;&amp; ($shorthand = getNamespacePortion($prefixed_url))){
			$url = $this-&gt;getURL($shorthand);
			if($url){
				return $url . substr($prefixed_url, strlen($shorthand) + 1);
			}
		}
		return false;
	}
}
</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all();
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>